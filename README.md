<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">

  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyBpZD0iQ2FtYWRhXzIiIGRhdGEtbmFtZT0iQ2FtYWRhIDIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDU0Mi45MyA0MDUuNzYiPgogIDxkZWZzPgogICAgPHN0eWxlPgogICAgICAuY2xzLTEgewogICAgICAgIGZpbGw6ICNlNjUzMDA7CiAgICAgIH0KCiAgICAgIC5jbHMtMiB7CiAgICAgICAgZmlsbDogI2ZmNjcxZDsKICAgICAgfQogICAgPC9zdHlsZT4KICA8L2RlZnM+CiAgPGcgaWQ9IkNhbWFkYV8xLTIiIGRhdGEtbmFtZT0iQ2FtYWRhIDEiPgogICAgPGc+CiAgICAgIDxjaXJjbGUgY2xhc3M9ImNscy0yIiBjeD0iMzEyLjA0IiBjeT0iODMuMzIiIHI9IjcxLjY4Ii8+CiAgICAgIDxyZWN0IGNsYXNzPSJjbHMtMSIgeD0iODkuMzciIHk9IjEyOS40NSIgd2lkdGg9Ijc4LjkyIiBoZWlnaHQ9IjI4NS40NyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjMwLjIgLTExLjM4KSByb3RhdGUoNDUpIi8+CiAgICAgIDxyZWN0IGNsYXNzPSJjbHMtMSIgeD0iLTEwLjciIHk9Ijg3LjY0IiB3aWR0aD0iMjgxLjI5IiBoZWlnaHQ9IjgwLjY4IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMjguNTUgLTU0LjQpIHJvdGF0ZSg0NSkiLz4KICAgICAgPHJlY3QgY2xhc3M9ImNscy0yIiB4PSIyMDcuMTIiIHk9IjI2NS44IiB3aWR0aD0iMjAxLjcxIiBoZWlnaHQ9IjgwLjQyIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzMDYuNTggLTEyOC4xNCkgcm90YXRlKDQ1KSIvPgogICAgICA8cmVjdCBjbGFzcz0iY2xzLTIiIHg9IjM3OS4xNCIgeT0iMTQ1Ljg0IiB3aWR0aD0iNzkuMzgiIGhlaWdodD0iMjcxLjYyIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzMjEuODMgLTIxMy42Nykgcm90YXRlKDQ1KSIvPgogICAgPC9nPgogIDwvZz4KPC9zdmc+">


<title>DEV.associados</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
<style>
:root {
  --color-primary: #f57c00;
  --color-background: #ffffff;
  --color-text: #000000;
}
* { box-sizing: border-box; margin: 0; padding: 0; }
html, body { font-family: 'Inter', sans-serif; font-size: 14px; }
header { background: var(--color-primary); padding: 20px; color: white; text-align: center; }
.container { max-width: 1000px; margin: auto; padding: 20px; }
.controls, .actions { display: flex; gap: 8px; flex-wrap: wrap; margin-bottom: 20px; align-items: center; }
.controls input[type="text"], .controls button, .controls label, .actions button {
  background: var(--color-primary);
  color: white;
  padding: 8px 12px;
  border: none;
  border-radius: 8px;
  height: 38px;
  font-size: 13px;
  cursor: pointer;
}
.controls select {
  background: var(--color-primary);
  color: white;
  border: none;
  border-radius: 8px;
  padding: 0 8px;
  height: 38px;
  font-size: 13px;
  cursor: pointer;
}
.controls label { display: flex; align-items: center; gap: 5px; }
.controls input[type="color"] {
  width: 38px; height: 38px; padding: 0; background: var(--color-primary); border: none; border-radius: 8px; cursor: pointer;
}
.grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; }
.card { padding: 15px; border: 1px solid; border-radius: 16px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); position: relative; }
textarea { width: 100%; padding: 8px; border-radius: 10px; margin-bottom: 10px; resize: vertical; border: 1px solid #ccc; font-size: 14px; }
.emoji-dropdown { position: relative; display: inline-block; }
.emoji-menu {
  display: none;
  position: absolute;
  background: #fff;
  color: #000;
  border: 1px solid #ccc;
  border-radius: 8px;
  width: 240px;
  padding: 10px;
  top: 50px;
  left: 0;
  z-index: 10;
  opacity: 0;
  transform: translateY(-10px);
  transition: opacity 0.3s ease, transform 0.3s ease;
  box-shadow: 0 4px 8px rgba(0,0,0,0.2);
  max-height: 300px;
  overflow-y: auto;
}
.emoji-menu.show { display: block; opacity: 1; transform: translateY(0); }
.emoji-category { margin-bottom: 10px; }
.emoji-category-title { font-weight: bold; margin-bottom: 5px; font-size: 14px; color: var(--color-primary); }
.emoji-item { font-size: 18px; cursor: pointer; padding: 4px; display: inline-block; }
.emoji-item:hover { background: #eee; border-radius: 4px; }
body.light-mode { background: #fff; color: #000; }
body.light-mode .card { background: #fff; border-color: #ddd; }
body.dark-mode {
  background: #121212;
  color: #eee;
  --color-background: #1e1e1e;
  --color-text: #eeeeee;
}
body.dark-mode .card { background: #1e1e1e; border-color: #333; }

.emoji-button {
  background: var(--color-primary);
  color: white;
  padding: 8px 12px;
  border: none;
  border-radius: 8px;
  height: 38px;
  font-size: 13px;
  cursor: pointer;
  margin-top: 8px;
  margin-right: 8px;
}

</style>
</head>
<body>
<header>
<a href="https://idolink.com.br/devassociados" target="_blank" style="text-decoration: none; color: inherit;">
 <h1>DEV.associados<h1>
<h4>sua ag√™ncia de marketing integrado</h4>
</a>
</header>
<div class="container">
  <div class="controls">
    <input type="text" placeholder="Buscar..." id="searchBox" oninput="filterSections()">
    <input type="text" placeholder="Nova sauda√ß√£o..." id="newSection">
    <button onclick="addSection()">Adicionar</button>
    <button onclick="openEmojiManager()">Gerenciar Emojis</button>
    <button onclick="exportData()">Exportar</button>
    <button onclick="importData()">Importar</button>
    <label>Cor<input type="color" onchange="changePrimaryColor(this.value)"></label>
    <label>
      <select id="themeSelector" onchange="changeTheme(this.value)">
        <option value="auto">üåë</option>
        <option value="light">‚òÄÔ∏è</option>
        <option value="dark">üåô</option>
      </select>
    </label>
    <button onclick="resetConfig()">Redefinir</button>
    <input type="file" id="fileInput" style="display:none" onchange="handleFile(event)">
  </div>
  <div class="grid" id="sections"></div>
</div>
<div id="emojiManagerModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); align-items:center; justify-content:center; z-index:1000;">
  <div style="background:var(--color-background); color:var(--color-text); padding:20px; border-radius:16px; max-width:500px; width:90%; max-height:90%; overflow-y:auto; position:relative;">
    <h2>Gerenciar Emojis</h2>
    <div id="emojiCategories"></div>
    <button class="emoji-button" onclick="addEmojiCategory()">+ Nova Categoria</button>
    <br><br>
    <button class="emoji-button" onclick="closeEmojiManager()">Fechar</button>
  </div>
</div>
<script>
let emojiData = {
  "Carinhas": ["üòÄ", "üòÉ", "üòÅ", "üòÇ"]
};
let data = {
  "Bom dia": ["Ol√°, bom dia! ‚òÄÔ∏è"],
  "Boa tarde": ["Ol√°, boa tarde! ‚õÖÔ∏è"],
  "Boa noite": ["Ol√°, boa noite! üåô"]
};
let currentTextId = null;

function saveToLocalStorage() {
  const allData = {
    saudacoes: data,
    emojiData,
    themeMode: localStorage.getItem('themeMode') || 'auto',
    primaryColor: localStorage.getItem('primaryColor') || '#f57c00'
  };
  localStorage.setItem('saudacoesData', JSON.stringify(allData));
}

function loadFromLocalStorage() {
  const saved = localStorage.getItem('saudacoesData');
  if (saved) {
    const parsed = JSON.parse(saved);
    data = parsed.saudacoes || {};
    emojiData = parsed.emojiData || { "Carinhas": ["üòÄ", "üòÉ", "üòÅ", "üòÇ"] };
  }
}

function render() {
  const grid = document.getElementById('sections');
  grid.innerHTML = '';
  Object.entries(data).forEach(([title, messages]) => {
    const card = document.createElement('div');
    card.className = 'card';
    card.innerHTML = `<h3>${title}</h3>` +
      messages.map((msg, i) => `<textarea id="${title}-${i}" onfocus="setActiveTextId('${title}-${i}')" oninput="updateMessage('${title}', ${i}, this.value)">${msg}</textarea>`).join('') +
      `<div class="actions">
        <button onclick="addMessage('${title}')">+ Caixa</button>
        <button onclick="removeMessage('${title}')">- Caixa</button>
        <button onclick="wrapText(currentTextId, '*')">Negrito</button>
        <button onclick="wrapText(currentTextId, '_')">It√°lico</button>
        <button onclick="copySelectedText()">Copiar</button>
        <button onclick="renameSection('${title}')">Renomear</button>
        <div class="emoji-dropdown">
          <button onclick="toggleEmojiMenu(this)">üòä Emojis</button>
          <div class="emoji-menu">
            <input type="text" placeholder="Buscar emoji..." oninput="filterEmojis(this)" style="width: 100%; padding: 5px; margin-bottom: 10px;">
            ${generateEmojiMenu()}
          </div>
        </div>
        <button onclick="removeSection('${title}')">Excluir</button>
      </div>`;
    grid.appendChild(card);
  });
}

function generateEmojiMenu() {
  let html = '';
  Object.entries(emojiData).forEach(([cat, emojis]) => {
    html += `<div class='emoji-category'><div class='emoji-category-title'>${cat}</div>`;
    emojis.forEach(e => {
      html += `<span class='emoji-item' onclick='insertEmoji("${e}")'>${e}</span>`;
    });
    html += `</div>`;
  });
  return html;
}

function refreshAllEmojiMenus() {
  document.querySelectorAll('.emoji-menu').forEach(menu => {
    const search = menu.querySelector('input');
    menu.innerHTML = '';
    if (search) menu.appendChild(search);
    menu.innerHTML += generateEmojiMenu();
  });
}

function setActiveTextId(id) { currentTextId = id; }
function updateMessage(section, i, val) { data[section][i] = val; saveToLocalStorage(); }
function addMessage(section) { data[section].push('Nova sauda√ß√£o...'); saveToLocalStorage(); render(); }
function removeMessage(section) { if (data[section].length > 1) { data[section].pop(); saveToLocalStorage(); render(); } }
function removeSection(section) { delete data[section]; saveToLocalStorage(); render(); }
function addSection() {
  const name = document.getElementById('newSection').value.trim();
  if (name && !data[name]) {
    data[name] = ['Nova sauda√ß√£o...'];
    document.getElementById('newSection').value = '';
    saveToLocalStorage();
    render();
  }
}
function exportData() {
  const fullData = {
    saudacoes: data,
    emojiData,
    themeMode: localStorage.getItem('themeMode') || 'auto',
    primaryColor: localStorage.getItem('primaryColor') || '#f57c00'
  };
  const blob = new Blob([JSON.stringify(fullData, null, 2)], { type: 'application/json' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = 'saudacoes.json';
  a.click();
}
function importData() { document.getElementById('fileInput').click(); }
function handleFile(e) {
  const file = e.target.files[0];
  const reader = new FileReader();
  reader.onload = () => {
    const imported = JSON.parse(reader.result);
    data = imported.saudacoes || {};
    emojiData = imported.emojiData || { "Carinhas": ["üòÄ", "üòÉ", "üòÅ", "üòÇ"] };
    if (imported.primaryColor) { changePrimaryColor(imported.primaryColor); }
    if (imported.themeMode) {
      localStorage.setItem('themeMode', imported.themeMode);
      document.getElementById('themeSelector').value = imported.themeMode;
      applyTheme(imported.themeMode);
    }
    saveToLocalStorage();
    render();
  };
  reader.readAsText(file);
}

function openEmojiManager() {
  renderEmojiManager();
  document.getElementById('emojiManagerModal').style.display = 'flex';
}
function closeEmojiManager() {
  document.getElementById('emojiManagerModal').style.display = 'none';
}

function renderEmojiManager() {
  const container = document.getElementById('emojiCategories');
  container.innerHTML = '';
  Object.entries(emojiData).forEach(([category, emojis]) => {
    const div = document.createElement('div');
    div.style.marginBottom = '20px';
    div.innerHTML = `
      <input type="text" value="${category}" onchange="renameEmojiCategory('${category}', this.value)" style="margin-bottom:5px; padding:5px; width:80%;">
      <div>${emojis.map((e, i) => `<span style="font-size:24px; cursor:pointer; margin:5px;" onclick="removeEmoji('${category}', ${i})">${e}</span>`).join('')}</div>
      <input type="text" placeholder="Novo emoji..." id="newEmoji-${category}" style="margin-top:5px; padding:5px; width:70%;">
      <button class="emoji-button" onclick="addEmoji('${category}')">Adicionar Emoji</button>
      <button class="emoji-button" onclick="deleteEmojiCategory('${category}')">Excluir Categoria</button>
    `;
    container.appendChild(div);
  });
}

function addEmojiCategory() {
  const name = prompt("Nome da nova categoria:");
  if (name && !emojiData[name]) {
    emojiData[name] = [];
    renderEmojiManager();
    refreshAllEmojiMenus();
    saveToLocalStorage();
  }
}

function renameEmojiCategory(oldName, newName) {
  if (oldName !== newName && newName) {
    emojiData[newName] = emojiData[oldName];
    delete emojiData[oldName];
    renderEmojiManager();
    refreshAllEmojiMenus();
    saveToLocalStorage();
  }
}

function deleteEmojiCategory(category) {
  if (confirm(`Excluir a categoria "${category}"?`)) {
    delete emojiData[category];
    renderEmojiManager();
    refreshAllEmojiMenus();
    saveToLocalStorage();
  }
}

function addEmoji(category) {
  const input = document.getElementById(`newEmoji-${category}`);
  const emoji = input.value.trim();
  if (emoji) {
    emojiData[category].push(emoji);
    input.value = '';
    renderEmojiManager();
    refreshAllEmojiMenus();
    saveToLocalStorage();
  }
}

function removeEmoji(category, index) {
  emojiData[category].splice(index, 1);
  renderEmojiManager();
  refreshAllEmojiMenus();
  saveToLocalStorage();
}

function wrapText(id, wrapper) {
  if (!id) return;
  const el = document.getElementById(id);
  const start = el.selectionStart;
  const end = el.selectionEnd;
  const selected = el.value.substring(start, end);
  el.setRangeText(wrapper + selected + wrapper);
  el.focus();
  el.setSelectionRange(start + wrapper.length, end + wrapper.length);
  updateDataFromElement(el);
}

function updateDataFromElement(el) {
  const [section, index] = el.id.split('-');
  updateMessage(section, Number(index), el.value);
}

function toggleEmojiMenu(button) {
  const menu = button.nextElementSibling;
  const isVisible = menu.classList.contains('show');
  document.querySelectorAll('.emoji-menu').forEach(m => m.classList.remove('show'));
  if (!isVisible) menu.classList.add('show');
}

function copySelectedText() {
  if (!currentTextId) return alert('Selecione uma caixa!');
  const el = document.getElementById(currentTextId);
  el.select();
  document.execCommand('copy');
  alert('Texto copiado!');
}

function insertEmoji(emoji) {
  if (!currentTextId) return alert('Selecione uma caixa!');
  const el = document.getElementById(currentTextId);
  const start = el.selectionStart;
  const end = el.selectionEnd;
  el.value = el.value.slice(0, start) + emoji + el.value.slice(end);
  el.focus();
  el.setSelectionRange(start + emoji.length, start + emoji.length);
  updateDataFromElement(el);
}

function changePrimaryColor(color) {
  document.documentElement.style.setProperty('--color-primary', color);
  localStorage.setItem('primaryColor', color);
}

function resetConfig() {
  localStorage.clear();
  location.reload();
}

function filterSections() {
  const query = document.getElementById('searchBox').value.toLowerCase();
  document.querySelectorAll('.card').forEach(card => {
    const title = card.querySelector('h3').innerText.toLowerCase();
    card.style.display = title.includes(query) ? '' : 'none';
  });
}

function filterEmojis(input) {
  const query = input.value.toLowerCase();
  const items = input.parentElement.querySelectorAll('.emoji-item');
  items.forEach(item => {
    item.style.display = item.textContent.includes(query) ? 'inline-block' : 'none';
  });
}

function applyTheme(mode) {
  document.body.classList.remove('light-mode', 'dark-mode');
  if (mode === 'light') {
    document.body.classList.add('light-mode');
  } else if (mode === 'dark') {
    document.body.classList.add('dark-mode');
  } else {
    const hour = new Date().getHours();
    if (hour >= 7 && hour < 18) {
      document.body.classList.add('light-mode');
    } else {
      document.body.classList.add('dark-mode');
    }
  }
}

function changeTheme(mode) {
  localStorage.setItem('themeMode', mode);
  applyTheme(mode);
}

function loadTheme() {
  const savedTheme = localStorage.getItem('themeMode') || 'auto';
  document.getElementById('themeSelector').value = savedTheme;
  applyTheme(savedTheme);
}

function autoUpdateTheme() {
  setInterval(() => {
    const mode = localStorage.getItem('themeMode') || 'auto';
    if (mode === 'auto') applyTheme('auto');
  }, 60000);
}

window.addEventListener('click', function(e) {
  if (!e.target.closest('.emoji-dropdown')) {
    document.querySelectorAll('.emoji-menu').forEach(m => m.classList.remove('show'));
  }
});

window.onload = () => {
  loadFromLocalStorage();
  loadTheme();
  render();
  autoUpdateTheme();
}
function renameSection(oldName) {
  const newName = prompt("Digite o novo nome para a sauda√ß√£o:", oldName);
  if (newName && newName !== oldName) {
    if (data[newName]) {
      alert("J√° existe uma sauda√ß√£o com esse nome!");
      return;
    }
    data[newName] = data[oldName];
    delete data[oldName];
    saveToLocalStorage();
    render();
  }
}

</script>
</body>
</html>
